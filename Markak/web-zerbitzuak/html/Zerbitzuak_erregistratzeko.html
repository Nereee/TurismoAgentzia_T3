<!DOCTYPE html>
<html lang="eu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Formulario Bidaiak</title>
  <link rel="stylesheet" href="../css/estiloaErabiltzailea.css">
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>

    <header>
        <div>
          <img class="logoAlexJav" src="../img/logoAlexjavexplorers (1).png" alt="Logo" width="170" height="110"/>
          <nav>
            <a href="hasiera.html">Hasiera</a>
            <a href="../index.html" onclick="seguruZaude(event)">Log out</a>
          </nav>
        </div>
        <div id="overlay" class="overlay">
          <div class="dialog">
            <p>Seguru zaude atera nahi zarela?</p>
            <button class="bai-btn" onclick="erantzunaBaiEz(true)">BAI</button>
            <button class="ez-btn" onclick="erantzunaBaiEz(false)">EZ</button>
          </div>
        </div>
      </header>
      
    <form class="formulario" id="bidaiakForm" action="zerbitzuak.php" method="POST">
        <h1>Zerbitzuak erregistratu</h1> 
        <label for="bidaia">Aukeratu bidaia:</label>
        <hr>
        <br>
        <select id="bidaia" name="bidaia" required>
          <option value="null">--AUKERATU--</option>
          <option value="Mota 1">Mota 1</option>
          <option value="Mota 2">Mota 2</option>
          <option value="Mota 3">Mota 3</option>
          <option value="Mota 4">Mota 4</option>
        </select>
        <br>

        <div class="zerbitzuak">
            <label>
                <input type="radio" name="opcion" value="form1" id="radio-form1"> Hegaldiak
            </label><br>
            <label>
                <input type="radio" name="opcion" value="form2" id="radio-form2"> Osatuak
            </label><br>
            <label>
                <input type="radio" name="opcion" value="form3" id="radio-form3"> Beste batzuk
            </label>
        </div>

        <!-- Formulario 1 (Hegoaldiak) -->
        <div  id="formulario1" class="formulario" style="display: none;">
            <h2>Hegoaldiak</h2>
            <label>Zein hegialdi mota nahi duzu JOAN / JOAN eta ETORRI?</label>
            <div class="zerbitzuak">
                <label class="zerbitzuak">
                    <p><input type="radio" name="hegaldi_mota" value="joan" id="radio-joan">
                    Joan</p>
                    <p><input type="radio" name="hegaldi_mota" value="joan_etorri" id="radio-joan2"> 
                    Joan eta etorri</p>
                </label>
            </div>
            <br>

            <!-- Formulario Joan Etorri -->
            <div id="formulariojoanetorri" style="display: none;">
                <h2>Hegoaldi(etorria)</h2>
                <label for="itzulera">Itzulera Data</label>
                <input type="date" id="itzulera" class="itzulera">
                <label for="itzuleraordua">Itzulera ordua</label>
                <input type="datetime">
                <label for="bueltairaupena">Bueltako Bidaiaren Iraupena</label>
                <input type="text">
                <label for="hegialdikode">Bueltako Hegaldi kodea</label>
                <input type="text">
            </div>

            <label for="aireportua1">Origen</label>
            <select id="aireportua1" name="aireportua1" required>
                <option value="null" style="visibility: hidden; display:none;">--AUKERATU--</option>
            </select>
            <br>
            <input type="hidden" name="zerbitzu_kodea" value="9"> <!-- Aquí el valor debe ser el correspondiente al Zerbitzu_kodea -->
    
            <label for="aireportua2">Helmugako aireportua</label>
            <select id="aireportua2" name="aireportua2" required>
                <option value="null" style="visibility: hidden; display:none;">--AUKERATU--</option>
            </select>
            <br>
            
            <label for="hegaldi_kode">Hegoaldi kodea</label>
            <input type="text" id="hegaldi_kode" name="hegaldi_kode">
            <br>
            <label for="airelinea">Airelinea:</label>
            <select id="airelinea" name="airelinea" required>
                <option value="null" style="visibility: hidden;" style="display:none;">--AUKERATU--</option>
            </select>
            <br>
            <label for="prezioa">Prezioa</label>
            <input type="text" id="prezioa" name="prezioa">
            <br>
            <label for="irtera">Irterra eguna</label>
            <input type="date" id="irtera" name="irtera" >
            <br>
            <label for="ordua">Irtera Ordua</label>
            <input type="time" id="ordua" name="ordua">
            <br>
            <label for="iraupena">Bidaiaren Iraupena (Ordueta)</label>
            <input type="time" id="iraupena" name="iraupena">
        </div>

        <!-- Formulario 2 (Osatuak) -->
        <div id="formulario2" class="formulario" style="display: none;">
            <h2>Osatuak</h2>
            <label for="izena">Hotelaren izena</label>
            <input type="text" id="izena" name="izena">
            <br>
            <label for="hiria">Hiria</label>
            <input type="text" id="hiria" name="hiria">
            <br>
            <label for="prezioa">Prezioa</label>
            <input type="text">
            <br>
            <label for="Sarrera">Sarrera Data</label>
            <input type="date">
            <br>
            <label for="irtera">Irtera Data</label>
            <input type="date">
            <hr>
            <br>
            <label for="logela">Logela mota</label>
            <select id="logela" name="logela" required>
                <option value="null">--AUKERATU--</option>
                <option value="Mota 1">Mota 1</option>
                <option value="Mota 2">Mota 2</option>
                <option value="Mota 3">Mota 3</option>
                <option value="Mota 4">Mota 4</option>
            </select>
        </div>

        <!-- Formulario 3 (Beste batzuk) -->
        <div id="formulario3" class="formulario" style="display: none;">
            <h2>Beste batzuk</h2>
            <label for="bestebatzuk">Beste batzuk</label>
            <input type="text">
            <br>
            <label for="databeste">Data</label>
            <input type="date">
            <br>
            <label for="deskribapena">Deskribapena</label>
            <textarea name="deskribapena" id="deskribapena" rows="4" placeholder="Idatzi zerbait"></textarea>
            <br>
            <label for="prezioabeste">Prezioa</label>
            <input type="text">
        </div>

        <button type="submit" class="form-buton">registratu</button>
    </form>

    <script src="../script/zerbitzuak.js"></script>
    <script>
        // Este es el código JavaScript que verifica el envío del formulario

        document.getElementById("bidaiakForm").addEventListener("submit", function(event) {
            event.preventDefault();  // Evita que el formulario se envíe automáticamente
            console.log("Formulario enviado");

            // Aquí puedes agregar cualquier lógica adicional o realizar una llamada AJAX
            // Puedes enviar datos con fetch aquí si lo necesitas

            this.submit();  // Si quieres permitir el envío, descomenta esta línea
        });
    </script>

    <script>
        function seguruZaude(event) {
             event.preventDefault();
             document.getElementById("overlay").style.visibility = "visible";
         }
         
         function erantzunaBaiEz(erantzuna) {
             if (erantzuna) {
                 alert("saioa ixten");
                 window.location.href = "../index.html"; // Agrega la URL aquí
             } else {
                 document.getElementById("overlay").style.visibility = "hidden";
             }
         }
    </script>

    <script>
        // Cargar los países dinámicamente en el select
        fetch('get-airelinea.php')  // URL del archivo PHP que devuelve los países
          .then(response => response.json())
          .then(data => {
            const selectElement = document.getElementById('airelinea');
            data.forEach(item => {
              const option = document.createElement('option');
              option.value = item.AIRELINEA_KODEA;  // Usamos el código del país
              option.textContent = item.HERRIALDE_IZENA;  // Nombre del país
              selectElement.appendChild(option);
            });
          })
          .catch(error => console.error('Error al cargar los datos:', error));
    </script>

    <script>
        // Función para cargar los aeropuertos en un select
        function cargarAireportuak(selectId) {
            fetch('get-aireportuak.php')  // Llamada al servidor para obtener los datos
                .then(response => response.json())
                .then(data => {
                    const selectElement = document.getElementById(selectId); // Obtener el select por ID
                    
                    data.forEach(item => {
                        const option = document.createElement('option');
                        option.value = item.AIREPORTUA;  // Código del aeropuerto
                        option.textContent = item.HIRIA; // Ciudad del aeropuerto
                        selectElement.appendChild(option);
                    });
                })
                .catch(error => console.error('Error al cargar los datos:', error));
        }

        // Cargar aeropuertos en los dos select
        cargarAireportuak('aireportua1');
        cargarAireportuak('aireportua2');
    </script>

</body>
</html>
